# Test inference of DictionaryEntry from Hashtable enumerator

class HashtableBug

	def main is shared
		.testHashtableEnumerator	
		.testKeyValueUnpack	
		
	def testHashtableEnumerator is shared
		ht = Hashtable()
		ht['a'] = 'value1'
		ht['b'] = 'value2'
		ht['c'] = 'value3'
		for de in ht
			assert de.getType == System.Collections.DictionaryEntry.getType
			#print de.key, de.value
			assert de.key in ['a', 'b', 'c']
			assert de.value in ['value1', 'value2', 'value3']		

		ht1 = Hashtable()
		ht1['x'] = 'Xvalue1'
		ht1['y'] = 'Xvalue2'
		ht1['z'] = 'Xvalue3'
		for de1 in ht1
			assert de1.key in ['x', 'y', 'z']
			assert de1.value in ['Xvalue1', 'Xvalue2', 'Xvalue3']		
			
		for de in ht1
			assert de.key in ['x', 'y', 'z']
			assert de.value in ['Xvalue1', 'Xvalue2', 'Xvalue3']		
			

	def testKeyValueUnpack is shared		
        ht = Hashtable()
		ht['a'] = 'value1'
		ht['b'] = 'value2'
		ht['c'] = 'value3'
		for k, v in ht
			assert k in ['a', 'b', 'c']
			assert v in ['value1', 'value2', 'value3']		
