class Button

	sig ClickHandler(sender as Object, args as EventArgs)

	event click as ClickHandler

	def receiveMouseClick
		# pretend it's always in our bounds and we're enabled
#		raise .click(this, EventArgs())
		raise .click, this, EventArgs()
#		raise .click, EventArgs()
#		raise .click
#		raise .click, this


class Program

	shared

		var _didClick = false
		
		def main
			butt = Button()
			listen butt.click, ref .handleClick
			assert not _didClick
			butt.receiveMouseClick
			assert _didClick

		def handleClick(sender as Object, args as EventArgs)
			_didClick = true
